<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test</title>
</head>
<body>
	<script type="module">
		import { DataValidator as DV } from './data-validator.js';

		const dv = (() => {
			try {
				return DV.New`
				string.split('.')
				=> [
					base64 => json => {
						alg: string.allowed('HS256', 'HS512'),
						typ: string.allowed('JWT'),
					},
					base64 => json => {
						?exp: unsigned,
						?iat: unsigned,
						?nbf: unsigned,
						?name: ([..2..string,].join(' ')|string),
						...
					},
					base64
				]`;
			} catch (error) {
				console.error(error);
				return null;
			}
		})();

		if(dv !== null) {
			{
				const {valid, value, error} = dv.validate(`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`);
				console.log('Result:\n\tValid:', valid, '\n\tValue:', value, '\n\tError:', error);
			}
			{
				const {valid, value, error} = dv.validate(`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6WyJKb2huIiwiRG9lIl0sImlhdCI6MTUxNjIzOTAyMn0.Fvtv9t0lLQeI1T64an45o90y_1mt-QiXTeoTS3KwGes`);
				console.log('Result:\n\tValid:', valid, '\n\tValue:', value, '\n\tError:', error);
			}
		}
	</script>
</body>
</html>