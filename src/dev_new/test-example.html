<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Test</title>
</head>
<body>
	<pre></pre>
	<script type="module">
		import {Types, DataValidator as DV } from './data-validator.js';

		// console.log(Types.parse('int', '   146546 '));

		const dv = (() => {
			try {
				return DV.New`
				string.split('.')
				=> [
					base64 => json => {
						alg: string._allowed('HS256', 'HS512'),
						typ: string._allowed('JWT'),
					},
					base64 => json => {
						?exp: unsigned,
						?iat: unsigned,
						?nbf: unsigned,
						?name: ([..2..string,].join(' ')|string),
						?city(='Somewhere'): string,
						...
					},
					base64
				]`;
			} catch (error) {
				console.error(error);
				return null;
			}
		})();
		// console.log(dv);

		if(dv !== null) {
			{
				const {valid, value, error} = dv.validate(`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c`);
				console.log('Result:\n\tValid:', valid, '\n\tValue:', value, '\n\tError:', error);
			}
			{
				const {valid, value, error} = dv.validate(`eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6WyJKb2huIiwiRG9lIl0sImlhdCI6MTUxNjIzOTAyMiwibmJmIjoxNTE2MjM5MDIxLCJleHAiOjE1MTYyMzkxMjJ9.obXwAnyGDz8UlzMjmo2gUVjyVj8tfkaoJanBSPErzz8`);
				console.log('Result:\n\tValid:', valid, '\n\tValue:', value, '\n\tError:', error);
			}
		}
	</script>
</body>
</html>